{"version":3,"file":"index.js","sources":["../../src/client/composables/useBaiduAnalytics.ts"],"sourcesContent":["import { watch } from 'vue'\nimport { usePageData } from 'vuepress/client'\n\ndeclare global {\n  interface Window {\n    _hmt?: [name: string, options: unknown][]\n  }\n}\n\n/**\n * Add baidu analytics to the site\n *\n * @see https://tongji.baidu.com/\n * @see https://tongji.baidu.com/holmes/Analytics/%E7%99%BE%E5%BA%A6%E7%BB%9F%E8%AE%A1%E4%BD%BF%E7%94%A8%E6%89%8B%E5%86%8C\n * @see https://tongji.baidu.com/holmes/Analytics/%E6%8A%80%E6%9C%AF%E6%8E%A5%E5%85%A5%E6%8C%87%E5%8D%97/JS%20API/JS%20API%E6%8A%80%E6%9C%AF%E6%96%87%E6%A1%A3/_trackPageview\n */\nexport const useBaiduAnalytics = (id: string): void => {\n  const page = usePageData()\n\n  // avoid duplicated import\n  if (window._hmt) return\n\n  // inject baidu analytics script\n  window._hmt = []\n  const script = document.createElement('script')\n  script.src = `https://hm.baidu.com/hm.js?${id}`\n  script.async = true\n  document.head.appendChild(script)\n\n  watch(\n    () => page.value.path,\n    (newLocation) => {\n      window._hmt!.push(['_trackPageview', newLocation])\n    },\n    { flush: 'post' },\n  )\n}\n"],"names":["useBaiduAnalytics","id","page","usePageData","script","watch","newLocation"],"mappings":"0EAgBO,MAAMA,EAAqBC,GAAqB,CACrD,MAAMC,EAAOC,IAGb,GAAI,OAAO,KAAM,OAGjB,OAAO,KAAO,GACd,MAAMC,EAAS,SAAS,cAAc,QAAQ,EAC9CA,EAAO,IAAM,8BAA8BH,CAAE,GAC7CG,EAAO,MAAQ,GACf,SAAS,KAAK,YAAYA,CAAM,EAEhCC,EACE,IAAMH,EAAK,MAAM,KAChBI,GAAgB,CACf,OAAO,KAAM,KAAK,CAAC,iBAAkBA,CAAW,CAAC,CACnD,EACA,CAAE,MAAO,MAAO,CAClB,CACF"}